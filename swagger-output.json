{
  "swagger": "2.0",
  "info": {
    "title": "TEST API",
    "description": "Description",
    "version": "1.0.0"
  },
  "host": "localhost:3000",
  "basePath": "/",
  "schemes": [
    "http"
  ],
  "paths": {
    "/": {
      "get": {
        "description": "",
        "responses": {
          "200": {
            "description": "OK"
          },
          "429": {
            "description": "Too Many Requests"
          }
        }
      }
    },
    "/user/register": {
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "User Registration",
        "description": "Registers a new user with firstName, lastName, email, phoneNumber, and password",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "firstName": {
                  "type": "string",
                  "example": "Tuuguu"
                },
                "lastName": {
                  "type": "string",
                  "example": "Dambasuren"
                },
                "email": {
                  "type": "string",
                  "example": "tuuguu@example.com"
                },
                "phoneNumber": {
                  "type": "string",
                  "example": "99881175"
                },
                "password": {
                  "type": "string",
                  "example": "1234"
                }
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Created"
          },
          "400": {
            "description": "Bad Request"
          },
          "409": {
            "description": "Conflict"
          },
          "422": {
            "description": "Unprocessable Entity"
          },
          "429": {
            "description": "Too Many Requests"
          },
          "503": {
            "description": "Service Unavailable"
          }
        }
      }
    },
    "/user/login": {
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "User login",
        "description": "Logs in a user with phoneNumber and password",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "phoneNumber": {
                  "type": "string",
                  "example": "99881175"
                },
                "password": {
                  "type": "string",
                  "example": "1234"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad Request"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "422": {
            "description": "Unprocessable Entity"
          },
          "429": {
            "description": "Too Many Requests"
          },
          "503": {
            "description": "Service Unavailable"
          }
        }
      }
    },
    "/user/refreshToken": {
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "Refresh Access Token",
        "description": "Returns a new access token given a valid refresh token.",
        "parameters": [
          {
            "name": "x-refresh-token",
            "in": "header",
            "description": "Refresh token to issue a new access token",
            "required": true,
            "type": "string",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "429": {
            "description": "Too Many Requests"
          },
          "503": {
            "description": "Service Unavailable"
          }
        }
      }
    },
    "/user/getuser": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Get user data",
        "description": "Returns user details from access token. Token is passed in the Authorization header.",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Bearer access token",
            "required": true,
            "type": "string",
            "example": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "401": {
            "description": "Unauthorized"
          },
          "429": {
            "description": "Too Many Requests"
          },
          "503": {
            "description": "Service Unavailable"
          }
        }
      }
    },
    "/user/phone/send-otp-current": {
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "Initiate phone number change",
        "description": "Sends an OTP to the user’s current phone number to confirm ownership.",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "description": "Bearer access token",
            "type": "string",
            "example": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          },
          {
            "name": "authorization",
            "in": "header",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "401": {
            "description": "Unauthorized"
          },
          "429": {
            "description": "Too Many Requests"
          },
          "503": {
            "description": "Service Unavailable"
          }
        }
      }
    },
    "/user/phone/verify-current-otp": {
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "Verify old phone OTP",
        "description": "Verifies OTP on old number.",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "description": "Bearer token",
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "otp": {
                  "type": "string",
                  "example": " "
                }
              }
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "401": {
            "description": "Unauthorized"
          },
          "429": {
            "description": "Too Many Requests"
          },
          "503": {
            "description": "Service Unavailable"
          }
        }
      }
    },
    "/user/phone/send-otp-new": {
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "Send OTP to new phone",
        "description": " Sends OTP to new number.",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "description": "Bearer token",
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "newPhoneNumber": {
                  "type": "string",
                  "example": " "
                }
              }
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "409": {
            "description": "Conflict"
          },
          "429": {
            "description": "Too Many Requests"
          },
          "503": {
            "description": "Service Unavailable"
          }
        }
      }
    },
    "/user/phone/verify-and-update": {
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "Verify old phone OTP and send OTP to new phone",
        "description": "Verifies OTP on old number, then sends OTP to new number.",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "description": "Bearer token",
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "otp": {
                  "type": "string",
                  "example": " "
                },
                "newPhoneNumber": {
                  "type": "string",
                  "example": " "
                }
              }
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "401": {
            "description": "Unauthorized"
          },
          "429": {
            "description": "Too Many Requests"
          },
          "503": {
            "description": "Service Unavailable"
          }
        }
      }
    },
    "/user/password/verifyCurrentPassword": {
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "Update current phone number",
        "description": "Updates the phone number.",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "description": "Bearer access token",
            "type": "string",
            "example": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "currentPassword": {
                  "type": "string",
                  "example": " "
                }
              }
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad Request"
          },
          "401": {
            "description": "Unauthorized"
          },
          "422": {
            "description": "Unprocessable Entity"
          },
          "429": {
            "description": "Too Many Requests"
          }
        }
      }
    },
    "/user/password/changePassword": {
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "Update current phone number",
        "description": "Updates the phone number.",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "description": "Bearer access token",
            "type": "string",
            "example": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "newPassword": {
                  "type": "string",
                  "example": " "
                }
              }
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad Request"
          },
          "401": {
            "description": "Unauthorized"
          },
          "422": {
            "description": "Unprocessable Entity"
          },
          "429": {
            "description": "Too Many Requests"
          }
        }
      }
    },
    "/otp/verify": {
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "Verify user via OTP",
        "description": "Verifies a user by phone number and OTP code",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "phoneNumber": {
                  "type": "number",
                  "example": 99881175
                },
                "code": {
                  "type": "string",
                  "example": "712329"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "401": {
            "description": "Unauthorized"
          },
          "422": {
            "description": "Unprocessable Entity"
          },
          "429": {
            "description": "Too Many Requests"
          },
          "503": {
            "description": "Service Unavailable"
          }
        }
      }
    },
    "/otp/forgot_pass": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Send OTP for password reset",
        "description": "Sends a 6-digit OTP to the provided phone number",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "phoneNumber": {
                  "type": "number",
                  "example": 99881175
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad Request"
          },
          "422": {
            "description": "Unprocessable Entity"
          },
          "429": {
            "description": "Too Many Requests"
          },
          "503": {
            "description": "Service Unavailable"
          }
        }
      }
    },
    "/otp/verify_reset": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Verify OTP for password reset",
        "description": "Verifies a 6-digit OTP sent to the user’s registered phone number for password reset.",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "phoneNumber": {
                  "type": "number",
                  "example": 99881175
                },
                "code": {
                  "type": "string",
                  "example": "712329"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "401": {
            "description": "Unauthorized"
          },
          "422": {
            "description": "Unprocessable Entity"
          },
          "429": {
            "description": "Too Many Requests"
          },
          "503": {
            "description": "Service Unavailable"
          }
        }
      }
    },
    "/otp/reset_password": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Reset password",
        "description": "Resets the user’s password after OTP verification.",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "phoneNumber": {
                  "type": "number",
                  "example": 99881175
                },
                "newPassword": {
                  "type": "string",
                  "example": "newStrongPassword123"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad Request"
          },
          "422": {
            "description": "Unprocessable Entity"
          },
          "429": {
            "description": "Too Many Requests"
          },
          "503": {
            "description": "Service Unavailable"
          }
        }
      }
    }
  }
}